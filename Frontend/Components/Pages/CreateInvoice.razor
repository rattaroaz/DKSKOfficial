@page "/createinvoice"
@using Microsoft.AspNetCore.Components.QuickGrid
@inject NavigationManager Navigation

<h3 class="text-center my-4">Create Invoice</h3>
<div class="container mt-3">
    <!-- Start and End Date Inputs -->
    <div class="row mb-3">
        <div class="col-12 col-md-6">
            Start Date:
            <input type="date" class="form-control" />
        </div>
        <div class="col-12 col-md-6">
            End Date:
            <input type="date" class="form-control" />
        </div>
    </div>

    <!-- Submit Button -->
    <div class="row mb-3">
        <div class="col-12">
            <input type="button" value="Submit" @onclick="InvoiceList" class="btn btn-primary w-100" />
        </div>
    </div>

    <!-- Display QuickGrid when selectedValue == 2 -->
    @if (selectedValue == 2)
    {
        <div class="row">
            <div class="col-12">
                <!-- Responsive Table Wrapper for QuickGrid -->
                <div class="table-responsive">
                    <QuickGrid Items="@people" class="table table-striped table-hover">
                        <PropertyColumn title="Start Date" Property="@(p => (DateOnly)p.DateOfOrder)" Format="yyyy-MM-dd" Sortable="(bool?)true" />
                        <PropertyColumn title="Invoice Number" Property="@(p => (int)(int)p.InvoiceNumber)" Sortable="(bool?)true" />
                        <PropertyColumn title="Company" Property="@(p => p.Company)" Sortable="true" />
                        <PropertyColumn title="Property Address" Property="@(p => p.PropertyName)" Sortable="true" />
                        <PropertyColumn title="Supervisor" Property="@(p => p.Supervisor)" Sortable="true" />
                        <PropertyColumn title="Manager" Property="@(p => p.Manager)" Sortable="true" />
                        <PropertyColumn title="Work Order" Property="@(p => (int)(int)p.WorkOrder)" Sortable="(bool?)true" />
                        <PropertyColumn title="Price" Property="@(p => (double)p.PriceOfOrder)" Sortable="(bool?)true" />
                    </QuickGrid>
                </div>
            </div>
        </div>
    }
</div>

@code {
    private int selectedValue = 1;
    private void InvoiceList()
    {
        selectedValue = 2;
        StateHasChanged();
    }
    private record Person(DateOnly DateOfOrder, string Company, string Supervisor, string Manager, string PropertyName, string UnitNumber, int InvoiceNumber, int WorkOrder, double PriceOfOrder, int DaysLate);

    private IQueryable<Person> people = new[]
    {
        new Person(new DateOnly(2024, 3, 16),"Company 1", "Supervisor 1", "", "22334 Nice Place", "A34", 3243, 998, 1232.33, 34),
        new Person(new DateOnly(2024, 4, 1),"Company 2", "Supervisor 3", "Manager 2", "Grand Oaks Apartments", "A54", 2257, 776, 3244.00, 22 ),
        new Person(new DateOnly(2024, 2, 11),"Company 3", "", "Manager 3", "664 Borzing Dr", "122", 7423, 557, 3322.22, 43),
        new Person(new DateOnly(2024, 3, 16),"Company 4", "Supervisor 4", "", "Super Market", "AVG", 6788, 442, 4455.32, 64),
        new Person(new DateOnly(2024, 2, 22),"Company 5", "Supervisor 2", "Manager 43", "Egyptian Mummy", "976", 0000, 134, 2233.26,12),
        new Person(new DateOnly(2023, 5, 16),"Company 6", "Supervisor 56", "Manager 2", "Something somewhere", "77h6", 5421,789, 987.55,5),
        new Person(new DateOnly(2024, 7, 13),"Company 7", "", "Manager 6", "334 Upstairs Rd", "8hj", 6675, 709, 6655.77, 54),
        new Person(new DateOnly(2024, 5, 12),"Company 3", "Supervisor 1", "Manager 8", "90 Old New Road", "p345", 3475, 711, 4455.54, 21),
        new Person(new DateOnly(2024, 12, 26),"Company 2", "Supervisor 3", "Manager 34", "532 Strange Place", "kkkku", 2798, 567, 124433.43, 11),
        new Person(new DateOnly(2024, 11, 30),"Company 2", "Supervisor 4", "Manager 2", "42134 Eating Icecream Dr.", "74", 8887, 532, 8832.09, 56)
    }.AsQueryable();
}
